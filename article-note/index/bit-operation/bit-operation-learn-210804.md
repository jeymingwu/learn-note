# 位运算初认识（&、|、^、~、>>、<<）

2021/08/04

原文链接：[位运算（&、|、^、~、>>、<<）](https://www.runoob.com/w3cnote/bit-operation.html)

## 1.概述

计算机中所有数据均以二进制的方式运行，对二进制数据的运算称为“位运算”。与十进制数据的运算比较，若合理运用位运算能显著提升机器上的执行效率。

表：0 - 16 的各个进制的数

| 十进制 | 二进制 | 八进制 | 十六进制|
|:---:|:---:|:---:|:---:|
| 0 | 0000 | 0000 | 0000 |
| 1 | 0001 | 0001 | 0001 |
| 2 | 0010 | 0002 | 0002 |
| 3 | 0011 | 0003 | 0003 |
| 4 | 0100 | 0004 | 0004 |
| 5 | 0101 | 0005 | 0005 |
| 6 | 0110 | 0006 | 0006 |
| 7 | 0111 | 0007 | 0007 |
| 8 | 1000 | 0010 | 0008 |
| 9 | 1001 | 0011 | 0009 |
| 10 | 1010 | 0012 | 000A |
| 11 | 1011 | 0013 | 000B |
| 12 | 1100 | 0014 | 000C |
| 13 | 1101 | 0015 | 000D |
| 14 | 1110 | 0016 | 000E |
| 15 | 1111 | 0017 | 000F |

## 2.位运算符总览

| 符号 | 描述 | 运算规则 |
|:---:|:---:|:---:|
| &#38; | 与 | 两位均为 1 时，结果才为 1 |
| &#124; | 或 | 两位均为 0 时，结果才为 0 |
| &#94; | 异或 | 两位相同为 0，相异为 1 |
| &#126; | 取反 | 1 变 0，0 变 1 |
| &#60;&#60; | 左移 | 各二进制位全部左移若干位，高位丢弃，低位补 0 |
| &#62;&#62; | 右移 | 各二进制位全部右移若干位，对无符号数，高位补 0；有符号数，各编译器处理方式各不相同，有补符号位（算术右移），有补 0 （逻辑右移） |

## 3.与运算符 （&#38;）

### 3.1 与运算符的运算规则

与运算规则：两位同为 1 时，结果才为 1；

```
0 & 0 = 0
0 & 1 = 0
1 & 0 = 0
1 & 1 = 1
```

注意：负数按补码形式进行位运算；

### 3.2 与运算的用途

#### 3.2.1 清零

若将一个数清零，只要将该数与 0 进行与运算，```number & 0 = 0```；

#### 3.2.2 取一个数的指定位

取哪位的数，只要与上该位为 1 的数即可；

如取数 X=1010 1010 的低 4 位，另一个数 Y 其低 4 位均为 1 其余位均为 0 即可，即 Y = 0000 1111，```X & Y = 0000 1010```；

#### 3.2.3 判断奇偶

若一个二进制的数的末尾是 0 ，则该数为偶数；末尾为 1，则该数为奇数；

```java

// 判断 15 是否为奇数
// 15: 1 1 1 1
//  1: 0 0 0 1
// ————————————————————
//  1: 0 0 0 1 

if ((a & 1) == 0) {
    // a 为偶数
} else {
    // a 为奇数
}

// 同理
if ((a & 2) == 0) {
    // a 为偶数
} else {
    // a 为奇数
}

```

## 4.或运算符 （&#124;）

### 4.1 或运算符的运算规则

或运算规则：两位同时为 0，结果才为 0；

```
0 | 0 = 0
0 | 1 = 1
1 | 0 = 1
1 | 1 = 1
```

注意：负数按补码形式进行位运算；

### 4.2 或运算符的用途

#### 4.2.1 将一个数的某些位设置为 1

将哪位的数设置 1，只需或上一个该位为 1 的数；

如将数 X=1010 1010 的低 4 位设置为 1，那么只需与 Y = 0000 1111 或运算即可；

```

X: 1 0 1 0 1 0 1 0
Y: 0 0 0 0 1 1 1 1
————————————————————
R: 1 0 1 0 1 1 1 1

```

## 5.异或运算符 （&#94;）

### 5.1 异或运算符的运算规则

异或运算规则：两数相同则为 0，相异为 1；

```
0 ^ 0 = 0
0 ^ 1 = 1
1 ^ 0 = 1
1 ^ 1 = 0
```

### 5.2 异或运算符的几条性质

1. 交换律；
2. 结合律 （A ^ B） ^ C = A ^ (B ^ C)；
3. 对于任何数 X，都有 X ^ X = 0, X ^ 0 = X；
4. 自反性：A ^ B ^ B = A ^ 0 = A；

### 5.2 异或运算符的用途

#### 5.2.1 翻转指定位

若需将某个数的某个位进行翻转，那么只需在该位上异或上 1 即可；

如将 X = 1010 1010 后 4 位进行翻转，那么只需异或上 Y = 0000 1111 即可，```1010 1010 ^ 0000 1111 = 1010 0101```；

```

// X: 0 1 0 1 0 1 0 1
// Y: 0 0 0 0 1 1 1 1
// ————————————————————
// R: 0 1 0 1 1 0 1 0

```

#### 5.2.2 与 0 相异或值不变（自身性质）

#### 5.2.3 交换两个数

```java

void swap(int a, int b) {
    a ^= b;
    b ^= a;
    a ^= b;
}

// 传统方法一：临时变量
void swap(int a, int b) {
    int temp = a;
    a = b;
    b = temp;
}

// 传统方法二：加减法
void swap(int a, int b) {
    a = a + b;
    b = a - b;
    a = a - b;
}

```

## 6.取反运算符 （&#126;）

### 6.1 取反运算符的运算规则

取反运算规则：1 变 0， 0 变 1；

```java

~0 = 1
~1 = 0

```

### 6.2 取反运算符的用途

#### 6.2.1 使一个数的最低位为 0

使 a 的最低位为 0，可以表示为 a & ~1；

## 7.左移运算符 （&#60;&#60;）

### 7.1 左移运算符的运算规则

左移运算规则：将一个数的二进制位全部左移若干位，高位丢弃，低位补 0；

### 7.2 左移运算符的用途

若左移时丢弃的高位不包含 1，那么每左移一位，相当于该数乘以 2；

## 8.右移运算符 （&#62;&#62;）

### 8.1 右移运算符的运算规则

右移运算规则：各二进制位全部右移若干位，正数左补 0，负数左补 1，右边丢弃；

### 8.2 右移运算符的用途

操作数每右移一位，相当于该数除以 2；

## 9.复合赋值运算符

| 符号 | 例子 | 相当于 |
|:---:|:---:|:---:|
| &#38;&#61; | a &#38;&#61; b | a &#61; a &#38; b |
| &#124;&#61; | a &#124;&#61; b | a &#61; a &#124; b |
| &#60;&#60;&#61; | a &#60;&#60;&#61; b | a &#61; a &#60;&#60; b |
| &#62;&#62;&#61; | a &#62;&#62;&#61; b | a &#61; a &#62;&#62; b |
| &#94;&#61; | a &#94;&#61; b | a &#61; a &#94; b |
